2018-05-26 13:40:28 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/practice/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/practice/lib/python3.6/site-packages/restfulpy/controllers.py", line 18, in __call__
    return super().__call__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/practice/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/practice/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 66, in resolve
    raise HttpFound(codec.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 28, in resolve
    key = binascii.unhexlify(hexstring)
binascii.Error: Non-hexadecimal digit found
2018-05-26 13:55:03 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/practice/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/practice/lib/python3.6/site-packages/restfulpy/controllers.py", line 18, in __call__
    return super().__call__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/practice/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/practice/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 66, in resolve
    raise HttpFound(codec.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 28, in resolve
    key = binascii.unhexlify(hexstring)
binascii.Error: Non-hexadecimal digit found
2018-05-27 11:27:51 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 67, in resolve
    raise HttpFound(codec.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 29, in resolve
    key = binascii.unhexlify(hexstring)
binascii.Error: Odd-length string
2018-05-27 11:27:55 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 63, in post
    return dict(hash_id=codec.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 17, in store
    from pudb import set_trace; set_trace()
ModuleNotFoundError: No module named 'pudb'
2018-05-27 11:27:55 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 67, in resolve
    raise HttpFound(codec.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 29, in resolve
    key = binascii.unhexlify(hexstring)
binascii.Error: Odd-length string
2018-05-27 11:29:03 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 67, in resolve
    raise HttpFound(codec.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 29, in resolve
    key = binascii.unhexlify(hexstring)
binascii.Error: Odd-length string
2018-05-27 11:29:28 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 67, in resolve
    raise HttpFound(codec.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 29, in resolve
    key = binascii.unhexlify(hexstring)
binascii.Error: Odd-length string
2018-05-27 12:21:24 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 78, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/exceptions.py", line 78, in __init__
    context.response_headers.add_header('Location', location)
  File "/usr/lib/python3.6/wsgiref/headers.py", line 175, in add_header
    _value = self._convert_string_type(_value)
  File "/usr/lib/python3.6/wsgiref/headers.py", line 46, in _convert_string_type
    " of type str (got {0})".format(repr(value)))
AssertionError: Header names/values must be of type str (got 0)
2018-05-27 12:21:28 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 74, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 39, in store
    new_url = Url(url=url)
NameError: name 'Url' is not defined
2018-05-27 12:21:28 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 78, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/exceptions.py", line 78, in __init__
    context.response_headers.add_header('Location', location)
  File "/usr/lib/python3.6/wsgiref/headers.py", line 175, in add_header
    _value = self._convert_string_type(_value)
  File "/usr/lib/python3.6/wsgiref/headers.py", line 46, in _convert_string_type
    " of type str (got {0})".format(repr(value)))
AssertionError: Header names/values must be of type str (got 0)
2018-05-27 12:34:28 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 82, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 48, in resolve
    url =  session.query(Url).filter_by(id=db_id).first()
NameError: name 'session' is not defined
2018-05-27 12:34:31 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 78, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 40, in store
    new_url = Url(url=url)
NameError: name 'Url' is not defined
2018-05-27 12:34:31 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 82, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 48, in resolve
    url =  session.query(Url).filter_by(id=db_id).first()
NameError: name 'session' is not defined
2018-05-27 12:34:46 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 82, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 48, in resolve
    url =  session.query(Url).filter_by(id=db_id).first()
NameError: name 'session' is not defined
2018-05-27 12:38:41 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 79, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 42, in store
    session.add(new_url)
NameError: name 'session' is not defined
2018-05-27 12:38:41 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 83, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 49, in resolve
    url =  session.query(Url).filter_by(id=db_id).first()
NameError: name 'session' is not defined
2018-05-27 12:38:55 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 83, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 49, in resolve
    url =  session.query(Url).filter_by(id=db_id).first()
NameError: name 'session' is not defined
2018-05-27 12:45:47 - main - ERROR - Internal Server Error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2946, in _execute_and_instances
    close_with_result=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2955, in _get_bind_args
    **kw
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2937, in _connection_from_session
    conn = self.session.connection(**kw)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 1035, in connection
    execution_options=execution_options)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (sqlite3.OperationalError) no such table: urls [SQL: 'INSERT INTO urls (url) VALUES (?)'] [parameters: ('www.varzesh3.com',)] (Background on this error at: http://sqlalche.me/e/e3q8)
2018-05-27 13:15:52 - main - ERROR - None
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2158, in _wrap_pool_connect
    return fn()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 403, in connect
    return _ConnectionFairy._checkout(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 788, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 532, in checkout
    rec = pool._do_get()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1193, in _do_get
    self._dec_overflow()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1190, in _do_get
    return self._create_connection()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 350, in _create_connection
    return _ConnectionRecord(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 477, in __init__
    self.__connect(first_connect_check=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 671, in __connect
    connection = pool._invoke_creator(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/strategies.py", line 106, in connect
    return dialect.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 410, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/psycopg2/__init__.py", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: FATAL:  password authentication failed for user "postgres"
FATAL:  password authentication failed for user "postgres"


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 80, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 44, in store
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 156, in save_obj
    base_mapper, states, uowtransaction
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 286, in _organize_states_for_save
    states):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 1252, in _connections_for_states
    connection = uowtransaction.transaction.connection(base_mapper)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 294, in connection
    return self._connection_for_bind(bind, execution_options)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 398, in _connection_for_bind
    conn = self._parent._connection_for_bind(bind, execution_options)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 409, in _connection_for_bind
    conn = bind.contextual_connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2123, in contextual_connect
    self._wrap_pool_connect(self.pool.connect, None),
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2162, in _wrap_pool_connect
    e, dialect, self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1476, in _handle_dbapi_exception_noconnection
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2158, in _wrap_pool_connect
    return fn()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 403, in connect
    return _ConnectionFairy._checkout(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 788, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 532, in checkout
    rec = pool._do_get()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1193, in _do_get
    self._dec_overflow()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1190, in _do_get
    return self._create_connection()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 350, in _create_connection
    return _ConnectionRecord(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 477, in __init__
    self.__connect(first_connect_check=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 671, in __connect
    connection = pool._invoke_creator(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/strategies.py", line 106, in connect
    return dialect.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 410, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/psycopg2/__init__.py", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) FATAL:  password authentication failed for user "postgres"
FATAL:  password authentication failed for user "postgres"
 (Background on this error at: http://sqlalche.me/e/e3q8)
2018-05-27 13:15:52 - main - ERROR - None
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2158, in _wrap_pool_connect
    return fn()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 403, in connect
    return _ConnectionFairy._checkout(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 788, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 532, in checkout
    rec = pool._do_get()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1193, in _do_get
    self._dec_overflow()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1190, in _do_get
    return self._create_connection()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 350, in _create_connection
    return _ConnectionRecord(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 477, in __init__
    self.__connect(first_connect_check=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 671, in __connect
    connection = pool._invoke_creator(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/strategies.py", line 106, in connect
    return dialect.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 410, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/psycopg2/__init__.py", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: FATAL:  password authentication failed for user "postgres"
FATAL:  password authentication failed for user "postgres"


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2946, in _execute_and_instances
    close_with_result=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2955, in _get_bind_args
    **kw
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2937, in _connection_from_session
    conn = self.session.connection(**kw)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 1035, in connection
    execution_options=execution_options)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 409, in _connection_for_bind
    conn = bind.contextual_connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2123, in contextual_connect
    self._wrap_pool_connect(self.pool.connect, None),
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2162, in _wrap_pool_connect
    e, dialect, self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1476, in _handle_dbapi_exception_noconnection
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2158, in _wrap_pool_connect
    return fn()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 403, in connect
    return _ConnectionFairy._checkout(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 788, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 532, in checkout
    rec = pool._do_get()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1193, in _do_get
    self._dec_overflow()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1190, in _do_get
    return self._create_connection()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 350, in _create_connection
    return _ConnectionRecord(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 477, in __init__
    self.__connect(first_connect_check=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 671, in __connect
    connection = pool._invoke_creator(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/strategies.py", line 106, in connect
    return dialect.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 410, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/psycopg2/__init__.py", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) FATAL:  password authentication failed for user "postgres"
FATAL:  password authentication failed for user "postgres"
 (Background on this error at: http://sqlalche.me/e/e3q8)
2018-05-27 13:36:03 - main - ERROR - None
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2158, in _wrap_pool_connect
    return fn()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 403, in connect
    return _ConnectionFairy._checkout(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 788, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 532, in checkout
    rec = pool._do_get()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1193, in _do_get
    self._dec_overflow()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1190, in _do_get
    return self._create_connection()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 350, in _create_connection
    return _ConnectionRecord(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 477, in __init__
    self.__connect(first_connect_check=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 671, in __connect
    connection = pool._invoke_creator(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/strategies.py", line 106, in connect
    return dialect.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 410, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/psycopg2/__init__.py", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: FATAL:  password authentication failed for user "postgres"
FATAL:  password authentication failed for user "postgres"


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2946, in _execute_and_instances
    close_with_result=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2955, in _get_bind_args
    **kw
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2937, in _connection_from_session
    conn = self.session.connection(**kw)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 1035, in connection
    execution_options=execution_options)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 409, in _connection_for_bind
    conn = bind.contextual_connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2123, in contextual_connect
    self._wrap_pool_connect(self.pool.connect, None),
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2162, in _wrap_pool_connect
    e, dialect, self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1476, in _handle_dbapi_exception_noconnection
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2158, in _wrap_pool_connect
    return fn()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 403, in connect
    return _ConnectionFairy._checkout(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 788, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 532, in checkout
    rec = pool._do_get()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1193, in _do_get
    self._dec_overflow()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1190, in _do_get
    return self._create_connection()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 350, in _create_connection
    return _ConnectionRecord(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 477, in __init__
    self.__connect(first_connect_check=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 671, in __connect
    connection = pool._invoke_creator(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/strategies.py", line 106, in connect
    return dialect.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 410, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/psycopg2/__init__.py", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) FATAL:  password authentication failed for user "postgres"
FATAL:  password authentication failed for user "postgres"
 (Background on this error at: http://sqlalche.me/e/e3q8)
2018-05-27 13:36:06 - main - ERROR - None
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2158, in _wrap_pool_connect
    return fn()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 403, in connect
    return _ConnectionFairy._checkout(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 788, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 532, in checkout
    rec = pool._do_get()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1193, in _do_get
    self._dec_overflow()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1190, in _do_get
    return self._create_connection()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 350, in _create_connection
    return _ConnectionRecord(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 477, in __init__
    self.__connect(first_connect_check=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 671, in __connect
    connection = pool._invoke_creator(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/strategies.py", line 106, in connect
    return dialect.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 410, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/psycopg2/__init__.py", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: FATAL:  password authentication failed for user "postgres"
FATAL:  password authentication failed for user "postgres"


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 80, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 44, in store
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 156, in save_obj
    base_mapper, states, uowtransaction
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 286, in _organize_states_for_save
    states):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 1252, in _connections_for_states
    connection = uowtransaction.transaction.connection(base_mapper)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 294, in connection
    return self._connection_for_bind(bind, execution_options)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 398, in _connection_for_bind
    conn = self._parent._connection_for_bind(bind, execution_options)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 409, in _connection_for_bind
    conn = bind.contextual_connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2123, in contextual_connect
    self._wrap_pool_connect(self.pool.connect, None),
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2162, in _wrap_pool_connect
    e, dialect, self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1476, in _handle_dbapi_exception_noconnection
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2158, in _wrap_pool_connect
    return fn()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 403, in connect
    return _ConnectionFairy._checkout(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 788, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 532, in checkout
    rec = pool._do_get()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1193, in _do_get
    self._dec_overflow()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1190, in _do_get
    return self._create_connection()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 350, in _create_connection
    return _ConnectionRecord(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 477, in __init__
    self.__connect(first_connect_check=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 671, in __connect
    connection = pool._invoke_creator(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/strategies.py", line 106, in connect
    return dialect.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 410, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/psycopg2/__init__.py", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) FATAL:  password authentication failed for user "postgres"
FATAL:  password authentication failed for user "postgres"
 (Background on this error at: http://sqlalche.me/e/e3q8)
2018-05-27 13:36:06 - main - ERROR - None
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2158, in _wrap_pool_connect
    return fn()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 403, in connect
    return _ConnectionFairy._checkout(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 788, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 532, in checkout
    rec = pool._do_get()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1193, in _do_get
    self._dec_overflow()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1190, in _do_get
    return self._create_connection()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 350, in _create_connection
    return _ConnectionRecord(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 477, in __init__
    self.__connect(first_connect_check=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 671, in __connect
    connection = pool._invoke_creator(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/strategies.py", line 106, in connect
    return dialect.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 410, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/psycopg2/__init__.py", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: FATAL:  password authentication failed for user "postgres"
FATAL:  password authentication failed for user "postgres"


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2946, in _execute_and_instances
    close_with_result=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2955, in _get_bind_args
    **kw
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2937, in _connection_from_session
    conn = self.session.connection(**kw)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 1035, in connection
    execution_options=execution_options)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 409, in _connection_for_bind
    conn = bind.contextual_connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2123, in contextual_connect
    self._wrap_pool_connect(self.pool.connect, None),
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2162, in _wrap_pool_connect
    e, dialect, self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1476, in _handle_dbapi_exception_noconnection
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 2158, in _wrap_pool_connect
    return fn()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 403, in connect
    return _ConnectionFairy._checkout(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 788, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 532, in checkout
    rec = pool._do_get()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1193, in _do_get
    self._dec_overflow()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 1190, in _do_get
    return self._create_connection()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 350, in _create_connection
    return _ConnectionRecord(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 477, in __init__
    self.__connect(first_connect_check=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/pool.py", line 671, in __connect
    connection = pool._invoke_creator(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/strategies.py", line 106, in connect
    return dialect.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 410, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/psycopg2/__init__.py", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) FATAL:  password authentication failed for user "postgres"
FATAL:  password authentication failed for user "postgres"
 (Background on this error at: http://sqlalche.me/e/e3q8)
2018-05-27 13:43:43 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (id, url) VALUES (nextval('url_id_seq'), 'w...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 80, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 44, in store
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (id, url) VALUES (nextval('url_id_seq'), 'w...
                    ^
 [SQL: "INSERT INTO urls (id, url) VALUES (nextval('url_id_seq'), %(url)s) RETURNING urls.id"] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 13:43:44 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 13:44:09 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 13:44:11 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (id, url) VALUES (nextval('url_id_seq'), 'w...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 80, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 44, in store
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (id, url) VALUES (nextval('url_id_seq'), 'w...
                    ^
 [SQL: "INSERT INTO urls (id, url) VALUES (nextval('url_id_seq'), %(url)s) RETURNING urls.id"] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 13:44:11 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 13:44:12 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 13:44:13 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 13:44:16 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (id, url) VALUES (nextval('url_id_seq'), 'w...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 80, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 44, in store
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (id, url) VALUES (nextval('url_id_seq'), 'w...
                    ^
 [SQL: "INSERT INTO urls (id, url) VALUES (nextval('url_id_seq'), %(url)s) RETURNING urls.id"] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 13:44:16 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 13:57:06 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 13:57:30 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (id, url) VALUES (nextval('url_id_seq'), 'w...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 80, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 44, in store
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (id, url) VALUES (nextval('url_id_seq'), 'w...
                    ^
 [SQL: "INSERT INTO urls (id, url) VALUES (nextval('url_id_seq'), %(url)s) RETURNING urls.id"] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 13:57:30 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 14:07:00 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 85, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 51, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 14:07:42 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (id, url) VALUES (nextval('url_id_seq'), 'w...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 81, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 45, in store
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (id, url) VALUES (nextval('url_id_seq'), 'w...
                    ^
 [SQL: "INSERT INTO urls (id, url) VALUES (nextval('url_id_seq'), %(url)s) RETURNING urls.id"] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 14:07:42 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 85, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 51, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 14:22:12 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 85, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 51, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 14:31:41 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 81, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/restfulpy/orm/__init__.py", line 92, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 46, in store
    hash_id = hashids.encode(new_url.id)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/hashids.py", line 226, in encode
    if not (values and all(_is_uint(x) for x in values)):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/hashids.py", line 226, in <genexpr>
    if not (values and all(_is_uint(x) for x in values)):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/hashids.py", line 27, in _is_uint
    return number == int(number) and number >= 0
TypeError: int() argument must be a string, a bytes-like object or a number, not 'NoneType'
2018-05-27 14:31:41 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 85, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 51, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 14:33:34 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 85, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 51, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 14:33:40 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (id, url) VALUES (nextval('url_id_seq'), 'w...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 81, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/restfulpy/orm/__init__.py", line 93, in wrapper
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (id, url) VALUES (nextval('url_id_seq'), 'w...
                    ^
 [SQL: "INSERT INTO urls (id, url) VALUES (nextval('url_id_seq'), %(url)s) RETURNING urls.id"] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 14:33:40 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 85, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 51, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 14:45:53 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 85, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 51, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 14:46:03 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 81, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/restfulpy/orm/__init__.py", line 93, in wrapper
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 14:46:03 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 85, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 51, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 16:29:39 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 16:29:46 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 80, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/restfulpy/orm/__init__.py", line 93, in wrapper
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 16:29:46 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 16:36:51 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 16:36:53 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 80, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/restfulpy/orm/__init__.py", line 93, in wrapper
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 16:36:53 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 16:38:27 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 80, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/restfulpy/orm/__init__.py", line 93, in wrapper
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 16:38:27 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 16:38:27 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 16:43:05 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 16:43:07 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 80, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/restfulpy/orm/__init__.py", line 93, in wrapper
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 16:43:08 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 16:57:36 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 16:57:38 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 80, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/restfulpy/orm/__init__.py", line 93, in wrapper
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 16:57:38 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:04:11 - main - ERROR - unique_violation
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.IntegrityError: duplicate key value violates unique constraint "urls_pkey"
DETAIL:  Key (id)=(1) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 80, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/restfulpy/orm/__init__.py", line 93, in wrapper
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.IntegrityError) duplicate key value violates unique constraint "urls_pkey"
DETAIL:  Key (id)=(1) already exists.
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/gkpj)
2018-05-27 17:04:11 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:04:15 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:04:17 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 50, in resolve
    url =  DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:14:46 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:14:49 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/restfulpy/orm/__init__.py", line 93, in wrapper
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:14:49 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:16:49 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:16:51 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/restfulpy/orm/__init__.py", line 93, in wrapper
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:16:51 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:21:01 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('http://www.varzesh3.com') RE...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/restfulpy/orm/__init__.py", line 93, in wrapper
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('http://www.varzesh3.com') RE...
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'http://www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:21:01 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:21:01 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:23:16 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (id, url) VALUES (nextval('user_id_seq'), '...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/restfulpy/orm/__init__.py", line 93, in wrapper
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (id, url) VALUES (nextval('user_id_seq'), '...
                    ^
 [SQL: "INSERT INTO urls (id, url) VALUES (nextval('user_id_seq'), %(url)s) RETURNING urls.id"] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:23:16 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:23:16 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:27:35 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:27:37 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:27:39 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:29:40 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/restfulpy/orm/__init__.py", line 93, in wrapper
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:29:41 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:29:43 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:29:45 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/restfulpy/orm/__init__.py", line 93, in wrapper
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:29:45 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:30:17 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:30:18 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:30:20 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/restfulpy/orm/__init__.py", line 92, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 45, in store
    new_url = Url(url)
TypeError: __init__() takes 1 positional argument but 2 were given
2018-05-27 17:30:20 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:31:31 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 46, in store
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:31:31 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:31:31 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:46:05 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('a.com') RETURNING urls.id
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 46, in store
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('a.com') RETURNING urls.id
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'a.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-27 17:46:20 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('a.com') RETURNING urls.id
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 46, in store
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('a.com') RETURNING urls.id
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'a.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 09:45:24 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 09:46:25 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 46, in store
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 09:46:25 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 09:46:28 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 09:53:14 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 88, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 52, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 09:54:20 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 84, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 46, in store
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 10:32:10 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 85, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 47, in store
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 10:57:54 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 93, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 57, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 10:58:22 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 93, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 57, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 10:59:52 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 93, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 57, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:01:58 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 93, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 57, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:01:59 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 93, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 57, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:02:40 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 93, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 57, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:03:15 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 93, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 57, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:04:26 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 89, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 49, in store
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:04:26 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 89, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 49, in store
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:04:27 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 93, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 57, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:04:33 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 93, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 57, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:04:35 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 93, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 57, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:04:37 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 89, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 49, in store
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:04:37 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 93, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 57, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:06:01 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 93, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 57, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:06:21 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 89, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 49, in store
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('www.varzesh3.com') RETURNING...
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'www.varzesh3.com'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:06:23 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 93, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 57, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:07:43 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('wewewewe') RETURNING urls.id
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 89, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 49, in store
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('wewewewe') RETURNING urls.id
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'wewewewe'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:09:24 - main - ERROR - undefined_table
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('wewewewe') RETURNING urls.id
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 89, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 49, in store
    DBSession.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 187, in reraise
    raise value
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) relation "urls" does not exist
LINE 1: INSERT INTO urls (url) VALUES ('wewewewe') RETURNING urls.id
                    ^
 [SQL: 'INSERT INTO urls (url) VALUES (%(url)s) RETURNING urls.id'] [parameters: {'url': 'wewewewe'}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:30:59 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 93, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 57, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:31:08 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 93, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 57, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:34:43 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 93, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 57, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:34:44 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 93, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 57, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:36:49 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 92, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 56, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:36:57 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 92, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 56, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:44:47 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 64, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 28, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:44:48 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 64, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 28, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:45:05 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 64, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 28, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:45:57 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 64, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 28, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:46:19 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 64, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 28, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:47:10 - main - ERROR - syntax_error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
psycopg2.ProgrammingError: syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 64, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 28, in resolve
    url = DBSession.query(Url).filter_by(id=db_id).first()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2825, in first
    ret = list(self[0:1])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2617, in __getitem__
    return list(res)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2925, in __iter__
    return self._execute_and_instances(context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2948, in _execute_and_instances
    result = conn.execute(querycontext.statement, self._params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/util/compat.py", line 186, in reraise
    raise value.with_traceback(tb)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/engine/default.py", line 507, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.ProgrammingError) syntax error at or near ")"
LINE 3: WHERE urls.id = () 
                         ^
 [SQL: 'SELECT urls.id AS urls_id, urls.url AS urls_url \nFROM urls \nWHERE urls.id = %(id_1)s \n LIMIT %(param_1)s'] [parameters: {'id_1': (), 'param_1': 1}] (Background on this error at: http://sqlalche.me/e/f405)
2018-05-28 11:58:11 - main - ERROR - Internal Server Error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 60, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 17, in store
    url_exist = DBSession.query(Url).filter_by(url=url).one_or_none()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2863, in one_or_none
    "Multiple rows were found for one_or_none()")
sqlalchemy.orm.exc.MultipleResultsFound: Multiple rows were found for one_or_none()
2018-05-28 11:58:18 - main - ERROR - Internal Server Error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 60, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 17, in store
    url_exist = DBSession.query(Url).filter_by(url=url).one_or_none()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2863, in one_or_none
    "Multiple rows were found for one_or_none()")
sqlalchemy.orm.exc.MultipleResultsFound: Multiple rows were found for one_or_none()
2018-05-28 11:59:43 - main - ERROR - Internal Server Error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 60, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 17, in store
    url_exist = DBSession.query(Url).filter_by(url=url).one_or_none()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2863, in one_or_none
    "Multiple rows were found for one_or_none()")
sqlalchemy.orm.exc.MultipleResultsFound: Multiple rows were found for one_or_none()
2018-05-28 11:59:49 - main - ERROR - Internal Server Error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 60, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 17, in store
    url_exist = DBSession.query(Url).filter_by(url=url).one_or_none()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2863, in one_or_none
    "Multiple rows were found for one_or_none()")
sqlalchemy.orm.exc.MultipleResultsFound: Multiple rows were found for one_or_none()
2018-05-28 11:59:56 - main - ERROR - Internal Server Error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 60, in post
    return dict(hash_id=new_db.store(context.form.get('url')))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 17, in store
    url_exist = DBSession.query(Url).filter_by(url=url).one_or_none()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/sqlalchemy/orm/query.py", line 2863, in one_or_none
    "Multiple rows were found for one_or_none()")
sqlalchemy.orm.exc.MultipleResultsFound: Multiple rows were found for one_or_none()
2018-05-28 12:34:09 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 67, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 33, in resolve
    return url.url
AttributeError: 'NoneType' object has no attribute 'url'
2018-05-28 12:34:24 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 67, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 33, in resolve
    return url.url
AttributeError: 'NoneType' object has no attribute 'url'
2018-05-28 12:36:29 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 67, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 30, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 12:36:34 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 67, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 30, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 12:36:41 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 67, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 30, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 12:36:45 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 67, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 30, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 12:52:31 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 65, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 30, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 12:52:35 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 65, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 30, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 12:52:43 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 65, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 30, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 12:52:43 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 65, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 30, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 12:54:42 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 65, in resolve
    raise HttpFound(new_db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 30, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 12:57:34 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 67, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 32, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 12:57:37 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 67, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 32, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 12:57:50 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 67, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 32, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 12:57:53 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 67, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 32, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 13:20:10 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 71, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 33, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 13:20:13 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 71, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 33, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 13:20:19 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 71, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 33, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 13:20:19 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 71, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 33, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 13:55:09 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 73, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 33, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 13:55:12 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 73, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 33, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 13:55:18 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 73, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 33, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 13:55:22 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 73, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 33, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 13:55:26 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 73, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 33, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 13:57:18 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 73, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 33, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 14:01:11 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 73, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 33, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 14:04:07 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 73, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 33, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 14:04:07 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 73, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 33, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 14:04:26 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 73, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 33, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 14:04:32 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 73, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 33, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 14:15:19 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 74, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 34, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 14:16:37 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 74, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 34, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-28 14:17:34 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 74, in resolve
    raise HttpFound(db.resolve(hexstring))
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/root.py", line 34, in resolve
    db_id, = hashids.decode(hash_id)
ValueError: not enough values to unpack (expected 1, got 0)
2018-05-29 12:17:54 - main - ERROR - Exception while serving the response.
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 116, in _response
    for chunk in response_iterable:
TypeError: 'Urls' object is not iterable
2018-05-29 12:22:48 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/urls.py", line 24, in get
    HttpFound(url)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/exceptions.py", line 78, in __init__
    context.response_headers.add_header('Location', location)
  File "/usr/lib/python3.6/wsgiref/headers.py", line 175, in add_header
    _value = self._convert_string_type(_value)
  File "/usr/lib/python3.6/wsgiref/headers.py", line 46, in _convert_string_type
    " of type str (got {0})".format(repr(value)))
AssertionError: Header names/values must be of type str (got <urlshortener.models.urls.Url object at 0x7f2b20027cf8>)
2018-05-29 12:24:12 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 15, in wrapper
    result = func(*args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/urls.py", line 24, in get
    HttpFound(url)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/exceptions.py", line 78, in __init__
    context.response_headers.add_header('Location', location)
  File "/usr/lib/python3.6/wsgiref/headers.py", line 175, in add_header
    _value = self._convert_string_type(_value)
  File "/usr/lib/python3.6/wsgiref/headers.py", line 46, in _convert_string_type
    " of type str (got {0})".format(repr(value)))
AssertionError: Header names/values must be of type str (got <urlshortener.models.urls.Url object at 0x7f2b11926f98>)
2018-05-29 12:24:54 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/lookup.py", line 247, in get_template
    return self._check(uri, self._collection[uri])
KeyError: ''

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 21, in wrapper
    template_ = lookup.get_template(template_name)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/lookup.py", line 261, in get_template
    "Cant locate template for uri %r" % uri)
mako.exceptions.TopLevelLookupException: Cant locate template for uri ''
2018-05-29 12:25:01 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/lookup.py", line 247, in get_template
    return self._check(uri, self._collection[uri])
KeyError: ''

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 21, in wrapper
    template_ = lookup.get_template(template_name)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/lookup.py", line 261, in get_template
    "Cant locate template for uri %r" % uri)
mako.exceptions.TopLevelLookupException: Cant locate template for uri ''
2018-05-29 13:24:50 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 21, in wrapper
    template_ = lookup.get_template(template_name)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/lookup.py", line 247, in get_template
    return self._check(uri, self._collection[uri])
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/lookup.py", line 343, in _check
    return self._load(template.filename, uri)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/lookup.py", line 323, in _load
    **self.template_args)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/template.py", line 338, in __init__
    module = self._compile_from_file(path, filename)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/template.py", line 395, in _compile_from_file
    self.module_writer)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/template.py", line 720, in _compile_module_file
    generate_magic_comment=True)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/template.py", line 685, in _compile
    node = lexer.parse()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/lexer.py", line 241, in parse
    if self.match_expression():
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/lexer.py", line 393, in match_expression
    text, end = self.parse_until_text(True, r'\|', r'}')
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/lexer.py", line 133, in parse_until_text
    **self.exception_kwargs)
mako.exceptions.SyntaxException: Expected: \|,} in file '/home/mohammad/workspace/urlshortener/urlshortener/templates/successfully.mak' at line: 8 char: 36
2018-05-29 13:43:26 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/lookup.py", line 247, in get_template
    return self._check(uri, self._collection[uri])
KeyError: ''

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 21, in wrapper
    template_ = lookup.get_template(template_name)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/lookup.py", line 261, in get_template
    "Cant locate template for uri %r" % uri)
mako.exceptions.TopLevelLookupException: Cant locate template for uri ''
2018-05-29 13:44:20 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/lookup.py", line 247, in get_template
    return self._check(uri, self._collection[uri])
KeyError: ''

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 21, in wrapper
    template_ = lookup.get_template(template_name)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/lookup.py", line 261, in get_template
    "Cant locate template for uri %r" % uri)
mako.exceptions.TopLevelLookupException: Cant locate template for uri ''
2018-05-29 13:45:26 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 22, in wrapper
    return template_.render(**result)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/template.py", line 462, in render
    return runtime._render(self, self.callable_, args, data)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/runtime.py", line 838, in _render
    **_kwargs_for_callable(callable_, data))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/runtime.py", line 873, in _render_context
    _exec_template(inherit, lclcontext, args=args, kwargs=kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/runtime.py", line 899, in _exec_template
    callable_(context, *args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/makomodules/successfully.mak.py", line 23, in render_body
    __M_writer(str(hash_id))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/runtime.py", line 226, in __str__
    raise NameError("Undefined")
NameError: Undefined
2018-05-29 13:47:08 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 22, in wrapper
    return template_.render(**result)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/template.py", line 462, in render
    return runtime._render(self, self.callable_, args, data)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/runtime.py", line 838, in _render
    **_kwargs_for_callable(callable_, data))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/runtime.py", line 873, in _render_context
    _exec_template(inherit, lclcontext, args=args, kwargs=kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/runtime.py", line 899, in _exec_template
    callable_(context, *args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/makomodules/successfully.mak.py", line 23, in render_body
    __M_writer(str(hash_id))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/runtime.py", line 226, in __str__
    raise NameError("Undefined")
NameError: Undefined
2018-05-29 13:55:04 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 22, in wrapper
    return template_.render(**result)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/template.py", line 462, in render
    return runtime._render(self, self.callable_, args, data)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/runtime.py", line 838, in _render
    **_kwargs_for_callable(callable_, data))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/runtime.py", line 873, in _render_context
    _exec_template(inherit, lclcontext, args=args, kwargs=kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/runtime.py", line 899, in _exec_template
    callable_(context, *args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/makomodules/successfully.mak.py", line 23, in render_body
    __M_writer(str(hash_id))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/runtime.py", line 226, in __str__
    raise NameError("Undefined")
NameError: Undefined
2018-05-29 14:11:43 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/helpers.py", line 22, in wrapper
    return template_.render(**result)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/template.py", line 462, in render
    return runtime._render(self, self.callable_, args, data)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/runtime.py", line 838, in _render
    **_kwargs_for_callable(callable_, data))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/runtime.py", line 873, in _render_context
    _exec_template(inherit, lclcontext, args=args, kwargs=kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/runtime.py", line 899, in _exec_template
    callable_(context, *args, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/makomodules/successfully.mak.py", line 23, in render_body
    __M_writer(str(hash_id))
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/mako/runtime.py", line 226, in __str__
    raise NameError("Undefined")
NameError: Undefined
2018-05-29 14:44:28 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 24, in post
    credentials = flow.step2_exchange(code)
NameError: name 'code' is not defined
2018-05-29 15:50:13 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 24, in post
    credentials = flow.step2_exchange(code)
NameError: name 'code' is not defined
2018-05-30 12:19:51 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 35, in get
    query = context.query_string()
TypeError: 'dict' object is not callable
2018-05-30 12:21:00 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 35, in get
    query = context.query_string()
TypeError: 'dict' object is not callable
2018-05-30 12:28:25 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 35, in get
    query = context.query_string()
TypeError: 'dict' object is not callable
2018-05-30 12:28:59 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 35, in get
    state = context.query_string('state')
TypeError: 'dict' object is not callable
2018-05-30 12:46:36 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 35, in get
    query_dic = context.query_string()
TypeError: 'dict' object is not callable
2018-05-30 13:57:26 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 44, in get
    flow.fetch_token()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/google_auth_oauthlib/flow.py", line 241, in fetch_token
    self.client_config['token_uri'], **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/requests_oauthlib/oauth2_session.py", line 192, in fetch_token
    raise ValueError('Please supply either code or '
ValueError: Please supply either code or authorization_response parameters.
2018-05-30 14:04:31 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 45, in get
    flow.fetch_token(authorization_response='https://www.googleapis.com/oauth2/v1/userinfo')
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/google_auth_oauthlib/flow.py", line 241, in fetch_token
    self.client_config['token_uri'], **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/requests_oauthlib/oauth2_session.py", line 187, in fetch_token
    state=self._state)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/oauthlib/oauth2/rfc6749/clients/web_application.py", line 174, in parse_request_uri_response
    response = parse_authorization_code_response(uri, state=state)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/oauthlib/oauth2/rfc6749/parameters.py", line 227, in parse_authorization_code_response
    raise MissingCodeError("Missing code parameter in response.")
oauthlib.oauth2.rfc6749.errors.MissingCodeError: (missing_code) Missing code parameter in response.
2018-05-30 14:08:00 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 45, in get
    flow.fetch_token(authorization_response='https://www.googleapis.com/oauth2/v1/userinfo', code=query_string_code)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/google_auth_oauthlib/flow.py", line 241, in fetch_token
    self.client_config['token_uri'], **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/requests_oauthlib/oauth2_session.py", line 244, in fetch_token
    self._client.parse_request_body_response(r.text, scope=self.scope)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/oauthlib/oauth2/rfc6749/clients/base.py", line 411, in parse_request_body_response
    self.token = parse_token_response(body, scope=scope)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/oauthlib/oauth2/rfc6749/parameters.py", line 379, in parse_token_response
    validate_token_parameters(params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/oauthlib/oauth2/rfc6749/parameters.py", line 386, in validate_token_parameters
    raise_from_error(params.get('error'), params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/oauthlib/oauth2/rfc6749/errors.py", line 415, in raise_from_error
    raise cls(**kwargs)
oauthlib.oauth2.rfc6749.errors.InvalidClientIdError: (invalid_request) Missing parameter: redirect_uri
2018-05-30 14:37:10 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 51, in get
    drive = build('userinfo', 'v2', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 230, in build
    raise e
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 272, in _retrieve_discovery_doc
    raise HttpError(resp, content, uri=actual_url)
googleapiclient.errors.HttpError: <HttpError 403 when requesting https://www.googleapis.com/discovery/v1/apis/userinfo/v2/rest returned "This service is not available from Iran. If you believe the country of origin was incorrectly identified, please report it at https://support.google.com/websearch/contact/ip.">
2018-05-30 16:17:26 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 51, in get
    drive = build('userinfo', 'v2', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 230, in build
    raise e
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 272, in _retrieve_discovery_doc
    raise HttpError(resp, content, uri=actual_url)
googleapiclient.errors.HttpError: <HttpError 403 when requesting https://www.googleapis.com/discovery/v1/apis/userinfo/v2/rest returned "This service is not available from Iran. If you believe the country of origin was incorrectly identified, please report it at https://support.google.com/websearch/contact/ip.">
2018-05-30 16:17:43 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 51, in get
    drive = build('userinfo', 'v2', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 230, in build
    raise e
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 272, in _retrieve_discovery_doc
    raise HttpError(resp, content, uri=actual_url)
googleapiclient.errors.HttpError: <HttpError 403 when requesting https://www.googleapis.com/discovery/v1/apis/userinfo/v2/rest returned "This service is not available from Iran. If you believe the country of origin was incorrectly identified, please report it at https://support.google.com/websearch/contact/ip.">
2018-05-30 16:18:13 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 51, in get
    drive = build('userinfo', 'v2', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 230, in build
    raise e
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 272, in _retrieve_discovery_doc
    raise HttpError(resp, content, uri=actual_url)
googleapiclient.errors.HttpError: <HttpError 403 when requesting https://www.googleapis.com/discovery/v1/apis/userinfo/v2/rest returned "This service is not available from Iran. If you believe the country of origin was incorrectly identified, please report it at https://support.google.com/websearch/contact/ip.">
2018-05-30 16:21:47 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 51, in get
    drive = build('userinfo', 'v2', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 233, in build
    "name: %s  version: %s" % (serviceName, version))
googleapiclient.errors.UnknownApiNameOrVersion: name: userinfo  version: v2
2018-05-30 16:22:40 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 51, in get
    drive = build('userinfo', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 233, in build
    "name: %s  version: %s" % (serviceName, version))
googleapiclient.errors.UnknownApiNameOrVersion: name: userinfo  version: v1
2018-05-30 16:23:11 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 51, in get
    drive = build('userinfo', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 233, in build
    "name: %s  version: %s" % (serviceName, version))
googleapiclient.errors.UnknownApiNameOrVersion: name: userinfo  version: v1
2018-05-30 16:27:30 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 233, in build
    "name: %s  version: %s" % (serviceName, version))
googleapiclient.errors.UnknownApiNameOrVersion: name: userinfo  version: v1
2018-05-30 16:28:20 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo.email', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 269, in _retrieve_discovery_doc
    resp, content = http.request(actual_url)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1514, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1264, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1187, in _conn_request
    conn.connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1013, in connect
    self.sock = self._context.wrap_socket(sock, server_hostname=self.host)
  File "/usr/lib/python3.6/ssl.py", line 407, in wrap_socket
    _context=self, _session=session)
  File "/usr/lib/python3.6/ssl.py", line 814, in __init__
    self.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 1068, in do_handshake
    self._sslobj.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 694, in do_handshake
    match_hostname(self.getpeercert(), self.server_hostname)
  File "/usr/lib/python3.6/ssl.py", line 327, in match_hostname
    % (hostname, ', '.join(map(repr, dnsnames))))
ssl.CertificateError: hostname 'userinfo.email.googleapis.com' doesn't match either of '*.googleapis.com', '*.clients6.google.com', '*.cloudendpointsapis.com', 'cloudendpointsapis.com', 'googleapis.com'
2018-05-30 16:36:00 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 233, in build
    "name: %s  version: %s" % (serviceName, version))
googleapiclient.errors.UnknownApiNameOrVersion: name: userinfo  version: v1
2018-05-30 16:42:38 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo', 'v2', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 233, in build
    "name: %s  version: %s" % (serviceName, version))
googleapiclient.errors.UnknownApiNameOrVersion: name: userinfo  version: v2
2018-05-30 16:43:00 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 233, in build
    "name: %s  version: %s" % (serviceName, version))
googleapiclient.errors.UnknownApiNameOrVersion: name: userinfo  version: v2
2018-05-30 16:43:32 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 233, in build
    "name: %s  version: %s" % (serviceName, version))
googleapiclient.errors.UnknownApiNameOrVersion: name: userinfo  version: v1
2018-05-30 16:47:29 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 233, in build
    "name: %s  version: %s" % (serviceName, version))
googleapiclient.errors.UnknownApiNameOrVersion: name: userinfo  version: v1
2018-05-30 16:48:25 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 233, in build
    "name: %s  version: %s" % (serviceName, version))
googleapiclient.errors.UnknownApiNameOrVersion: name: userinfo  version: v1
2018-05-30 16:50:40 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 42, in get
    code=query_string_code
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/google_auth_oauthlib/flow.py", line 241, in fetch_token
    self.client_config['token_uri'], **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/requests_oauthlib/oauth2_session.py", line 244, in fetch_token
    self._client.parse_request_body_response(r.text, scope=self.scope)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/oauthlib/oauth2/rfc6749/clients/base.py", line 411, in parse_request_body_response
    self.token = parse_token_response(body, scope=scope)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/oauthlib/oauth2/rfc6749/parameters.py", line 379, in parse_token_response
    validate_token_parameters(params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/oauthlib/oauth2/rfc6749/parameters.py", line 386, in validate_token_parameters
    raise_from_error(params.get('error'), params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/oauthlib/oauth2/rfc6749/errors.py", line 415, in raise_from_error
    raise cls(**kwargs)
oauthlib.oauth2.rfc6749.errors.InvalidGrantError: (invalid_grant) Bad Request
2018-05-30 16:56:00 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('email', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 233, in build
    "name: %s  version: %s" % (serviceName, version))
googleapiclient.errors.UnknownApiNameOrVersion: name: email  version: v1
2018-05-30 17:04:48 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo.profile', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 269, in _retrieve_discovery_doc
    resp, content = http.request(actual_url)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1514, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1264, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1187, in _conn_request
    conn.connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1013, in connect
    self.sock = self._context.wrap_socket(sock, server_hostname=self.host)
  File "/usr/lib/python3.6/ssl.py", line 407, in wrap_socket
    _context=self, _session=session)
  File "/usr/lib/python3.6/ssl.py", line 814, in __init__
    self.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 1068, in do_handshake
    self._sslobj.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 694, in do_handshake
    match_hostname(self.getpeercert(), self.server_hostname)
  File "/usr/lib/python3.6/ssl.py", line 327, in match_hostname
    % (hostname, ', '.join(map(repr, dnsnames))))
ssl.CertificateError: hostname 'userinfo.profile.googleapis.com' doesn't match either of '*.googleapis.com', '*.clients6.google.com', '*.cloudendpointsapis.com', 'cloudendpointsapis.com', 'googleapis.com'
2018-05-30 17:14:38 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo.profile', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 269, in _retrieve_discovery_doc
    resp, content = http.request(actual_url)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1514, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1264, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1187, in _conn_request
    conn.connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1013, in connect
    self.sock = self._context.wrap_socket(sock, server_hostname=self.host)
  File "/usr/lib/python3.6/ssl.py", line 407, in wrap_socket
    _context=self, _session=session)
  File "/usr/lib/python3.6/ssl.py", line 814, in __init__
    self.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 1068, in do_handshake
    self._sslobj.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 694, in do_handshake
    match_hostname(self.getpeercert(), self.server_hostname)
  File "/usr/lib/python3.6/ssl.py", line 327, in match_hostname
    % (hostname, ', '.join(map(repr, dnsnames))))
ssl.CertificateError: hostname 'userinfo.profile.googleapis.com' doesn't match either of '*.googleapis.com', '*.clients6.google.com', '*.cloudendpointsapis.com', 'cloudendpointsapis.com', 'googleapis.com'
2018-05-30 17:15:17 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 233, in build
    "name: %s  version: %s" % (serviceName, version))
googleapiclient.errors.UnknownApiNameOrVersion: name: userinfo  version: v1
2018-05-30 17:15:41 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo.profile', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 269, in _retrieve_discovery_doc
    resp, content = http.request(actual_url)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1514, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1264, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1187, in _conn_request
    conn.connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1013, in connect
    self.sock = self._context.wrap_socket(sock, server_hostname=self.host)
  File "/usr/lib/python3.6/ssl.py", line 407, in wrap_socket
    _context=self, _session=session)
  File "/usr/lib/python3.6/ssl.py", line 814, in __init__
    self.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 1068, in do_handshake
    self._sslobj.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 694, in do_handshake
    match_hostname(self.getpeercert(), self.server_hostname)
  File "/usr/lib/python3.6/ssl.py", line 327, in match_hostname
    % (hostname, ', '.join(map(repr, dnsnames))))
ssl.CertificateError: hostname 'userinfo.profile.googleapis.com' doesn't match either of '*.googleapis.com', '*.clients6.google.com', '*.cloudendpointsapis.com', 'cloudendpointsapis.com', 'googleapis.com'
2018-05-30 17:25:41 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo.profile', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 269, in _retrieve_discovery_doc
    resp, content = http.request(actual_url)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1514, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1264, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1187, in _conn_request
    conn.connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1013, in connect
    self.sock = self._context.wrap_socket(sock, server_hostname=self.host)
  File "/usr/lib/python3.6/ssl.py", line 407, in wrap_socket
    _context=self, _session=session)
  File "/usr/lib/python3.6/ssl.py", line 814, in __init__
    self.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 1068, in do_handshake
    self._sslobj.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 694, in do_handshake
    match_hostname(self.getpeercert(), self.server_hostname)
  File "/usr/lib/python3.6/ssl.py", line 327, in match_hostname
    % (hostname, ', '.join(map(repr, dnsnames))))
ssl.CertificateError: hostname 'userinfo.profile.googleapis.com' doesn't match either of '*.googleapis.com', '*.clients6.google.com', '*.cloudendpointsapis.com', 'cloudendpointsapis.com', 'googleapis.com'
2018-05-30 17:28:24 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo.profile', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 269, in _retrieve_discovery_doc
    resp, content = http.request(actual_url)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1514, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1264, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1187, in _conn_request
    conn.connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1013, in connect
    self.sock = self._context.wrap_socket(sock, server_hostname=self.host)
  File "/usr/lib/python3.6/ssl.py", line 407, in wrap_socket
    _context=self, _session=session)
  File "/usr/lib/python3.6/ssl.py", line 814, in __init__
    self.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 1068, in do_handshake
    self._sslobj.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 694, in do_handshake
    match_hostname(self.getpeercert(), self.server_hostname)
  File "/usr/lib/python3.6/ssl.py", line 327, in match_hostname
    % (hostname, ', '.join(map(repr, dnsnames))))
ssl.CertificateError: hostname 'userinfo.profile.googleapis.com' doesn't match either of '*.googleapis.com', '*.clients6.google.com', '*.cloudendpointsapis.com', 'cloudendpointsapis.com', 'googleapis.com'
2018-05-30 17:29:50 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo.profile', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 269, in _retrieve_discovery_doc
    resp, content = http.request(actual_url)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1514, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1264, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1187, in _conn_request
    conn.connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1013, in connect
    self.sock = self._context.wrap_socket(sock, server_hostname=self.host)
  File "/usr/lib/python3.6/ssl.py", line 407, in wrap_socket
    _context=self, _session=session)
  File "/usr/lib/python3.6/ssl.py", line 814, in __init__
    self.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 1068, in do_handshake
    self._sslobj.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 694, in do_handshake
    match_hostname(self.getpeercert(), self.server_hostname)
  File "/usr/lib/python3.6/ssl.py", line 327, in match_hostname
    % (hostname, ', '.join(map(repr, dnsnames))))
ssl.CertificateError: hostname 'userinfo.profile.googleapis.com' doesn't match either of '*.googleapis.com', '*.clients6.google.com', '*.cloudendpointsapis.com', 'cloudendpointsapis.com', 'googleapis.com'
2018-05-30 17:30:13 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo.profile', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 269, in _retrieve_discovery_doc
    resp, content = http.request(actual_url)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1514, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1264, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1187, in _conn_request
    conn.connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1013, in connect
    self.sock = self._context.wrap_socket(sock, server_hostname=self.host)
  File "/usr/lib/python3.6/ssl.py", line 407, in wrap_socket
    _context=self, _session=session)
  File "/usr/lib/python3.6/ssl.py", line 814, in __init__
    self.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 1068, in do_handshake
    self._sslobj.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 694, in do_handshake
    match_hostname(self.getpeercert(), self.server_hostname)
  File "/usr/lib/python3.6/ssl.py", line 327, in match_hostname
    % (hostname, ', '.join(map(repr, dnsnames))))
ssl.CertificateError: hostname 'userinfo.profile.googleapis.com' doesn't match either of '*.googleapis.com', '*.clients6.google.com', '*.cloudendpointsapis.com', 'cloudendpointsapis.com', 'googleapis.com'
2018-05-30 17:31:53 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo.profile', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 269, in _retrieve_discovery_doc
    resp, content = http.request(actual_url)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1514, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1264, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1187, in _conn_request
    conn.connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1013, in connect
    self.sock = self._context.wrap_socket(sock, server_hostname=self.host)
  File "/usr/lib/python3.6/ssl.py", line 407, in wrap_socket
    _context=self, _session=session)
  File "/usr/lib/python3.6/ssl.py", line 814, in __init__
    self.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 1068, in do_handshake
    self._sslobj.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 694, in do_handshake
    match_hostname(self.getpeercert(), self.server_hostname)
  File "/usr/lib/python3.6/ssl.py", line 327, in match_hostname
    % (hostname, ', '.join(map(repr, dnsnames))))
ssl.CertificateError: hostname 'userinfo.profile.googleapis.com' doesn't match either of '*.googleapis.com', '*.clients6.google.com', '*.cloudendpointsapis.com', 'cloudendpointsapis.com', 'googleapis.com'
2018-05-31 09:48:57 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo.profile', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 230, in build
    raise e
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 272, in _retrieve_discovery_doc
    raise HttpError(resp, content, uri=actual_url)
googleapiclient.errors.HttpError: <HttpError 403 when requesting https://www.googleapis.com/discovery/v1/apis/userinfo.profile/v1/rest returned "This service is not available from Iran. If you believe the country of origin was incorrectly identified, please report it at https://support.google.com/websearch/contact/ip.">
2018-05-31 09:50:28 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo.profile', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 269, in _retrieve_discovery_doc
    resp, content = http.request(actual_url)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1514, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1264, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1187, in _conn_request
    conn.connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1013, in connect
    self.sock = self._context.wrap_socket(sock, server_hostname=self.host)
  File "/usr/lib/python3.6/ssl.py", line 407, in wrap_socket
    _context=self, _session=session)
  File "/usr/lib/python3.6/ssl.py", line 814, in __init__
    self.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 1068, in do_handshake
    self._sslobj.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 694, in do_handshake
    match_hostname(self.getpeercert(), self.server_hostname)
  File "/usr/lib/python3.6/ssl.py", line 327, in match_hostname
    % (hostname, ', '.join(map(repr, dnsnames))))
ssl.CertificateError: hostname 'userinfo.profile.googleapis.com' doesn't match either of '*.googleapis.com', '*.clients6.google.com', '*.cloudendpointsapis.com', 'cloudendpointsapis.com', 'googleapis.com'
2018-05-31 09:52:35 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 48, in get
    drive = build('userinfo', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 233, in build
    "name: %s  version: %s" % (serviceName, version))
googleapiclient.errors.UnknownApiNameOrVersion: name: userinfo  version: v1
2018-05-31 10:47:56 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 56, in get
    drive = build('userinfo.profile', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 269, in _retrieve_discovery_doc
    resp, content = http.request(actual_url)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1514, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1264, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1187, in _conn_request
    conn.connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1013, in connect
    self.sock = self._context.wrap_socket(sock, server_hostname=self.host)
  File "/usr/lib/python3.6/ssl.py", line 407, in wrap_socket
    _context=self, _session=session)
  File "/usr/lib/python3.6/ssl.py", line 814, in __init__
    self.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 1068, in do_handshake
    self._sslobj.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 694, in do_handshake
    match_hostname(self.getpeercert(), self.server_hostname)
  File "/usr/lib/python3.6/ssl.py", line 327, in match_hostname
    % (hostname, ', '.join(map(repr, dnsnames))))
ssl.CertificateError: hostname 'userinfo.profile.googleapis.com' doesn't match either of '*.googleapis.com', '*.clients6.google.com', '*.cloudendpointsapis.com', 'cloudendpointsapis.com', 'googleapis.com'
2018-05-31 11:03:07 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 50, in get
    headers={'content-type: application/json'
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/requests/api.py", line 112, in post
    return request('post', url, data=data, json=json, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/requests/api.py", line 58, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/requests/sessions.py", line 494, in request
    prep = self.prepare_request(req)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/requests/sessions.py", line 437, in prepare_request
    hooks=merge_hooks(request.hooks, self.hooks),
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/requests/models.py", line 306, in prepare
    self.prepare_headers(headers)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/requests/models.py", line 438, in prepare_headers
    for header in headers.items():
AttributeError: 'set' object has no attribute 'items'
2018-05-31 11:28:42 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 55, in get
    http = credentials.authorize(http)
AttributeError: 'Credentials' object has no attribute 'authorize'
2018-05-31 11:48:25 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 56, in get
    drive = build('userinfo.profile', 'v1', http)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 269, in _retrieve_discovery_doc
    resp, content = http.request(actual_url)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1514, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1264, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1187, in _conn_request
    conn.connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1013, in connect
    self.sock = self._context.wrap_socket(sock, server_hostname=self.host)
  File "/usr/lib/python3.6/ssl.py", line 407, in wrap_socket
    _context=self, _session=session)
  File "/usr/lib/python3.6/ssl.py", line 814, in __init__
    self.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 1068, in do_handshake
    self._sslobj.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 694, in do_handshake
    match_hostname(self.getpeercert(), self.server_hostname)
  File "/usr/lib/python3.6/ssl.py", line 327, in match_hostname
    % (hostname, ', '.join(map(repr, dnsnames))))
ssl.CertificateError: hostname 'userinfo.profile.googleapis.com' doesn't match either of '*.googleapis.com', '*.clients6.google.com', '*.cloudendpointsapis.com', 'cloudendpointsapis.com', 'googleapis.com'
2018-05-31 12:18:26 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 56, in get
    drive = build('userinfo.profile', 'v1', http)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 269, in _retrieve_discovery_doc
    resp, content = http.request(actual_url)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1514, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1264, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1187, in _conn_request
    conn.connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1013, in connect
    self.sock = self._context.wrap_socket(sock, server_hostname=self.host)
  File "/usr/lib/python3.6/ssl.py", line 407, in wrap_socket
    _context=self, _session=session)
  File "/usr/lib/python3.6/ssl.py", line 814, in __init__
    self.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 1068, in do_handshake
    self._sslobj.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 694, in do_handshake
    match_hostname(self.getpeercert(), self.server_hostname)
  File "/usr/lib/python3.6/ssl.py", line 327, in match_hostname
    % (hostname, ', '.join(map(repr, dnsnames))))
ssl.CertificateError: hostname 'userinfo.profile.googleapis.com' doesn't match either of '*.googleapis.com', '*.clients6.google.com', '*.cloudendpointsapis.com', 'cloudendpointsapis.com', 'googleapis.com'
2018-05-31 12:18:36 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 56, in get
    drive = build('userinfo.profile', 'v1', http)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 269, in _retrieve_discovery_doc
    resp, content = http.request(actual_url)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1514, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1264, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1187, in _conn_request
    conn.connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1013, in connect
    self.sock = self._context.wrap_socket(sock, server_hostname=self.host)
  File "/usr/lib/python3.6/ssl.py", line 407, in wrap_socket
    _context=self, _session=session)
  File "/usr/lib/python3.6/ssl.py", line 814, in __init__
    self.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 1068, in do_handshake
    self._sslobj.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 694, in do_handshake
    match_hostname(self.getpeercert(), self.server_hostname)
  File "/usr/lib/python3.6/ssl.py", line 327, in match_hostname
    % (hostname, ', '.join(map(repr, dnsnames))))
ssl.CertificateError: hostname 'userinfo.profile.googleapis.com' doesn't match either of '*.googleapis.com', '*.clients6.google.com', '*.cloudendpointsapis.com', 'cloudendpointsapis.com', 'googleapis.com'
2018-05-31 12:18:45 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 44, in get
    code=query_string_code
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/google_auth_oauthlib/flow.py", line 241, in fetch_token
    self.client_config['token_uri'], **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/requests_oauthlib/oauth2_session.py", line 244, in fetch_token
    self._client.parse_request_body_response(r.text, scope=self.scope)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/oauthlib/oauth2/rfc6749/clients/base.py", line 411, in parse_request_body_response
    self.token = parse_token_response(body, scope=scope)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/oauthlib/oauth2/rfc6749/parameters.py", line 379, in parse_token_response
    validate_token_parameters(params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/oauthlib/oauth2/rfc6749/parameters.py", line 386, in validate_token_parameters
    raise_from_error(params.get('error'), params)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/oauthlib/oauth2/rfc6749/errors.py", line 415, in raise_from_error
    raise cls(**kwargs)
oauthlib.oauth2.rfc6749.errors.InvalidGrantError: (invalid_grant) Code was already redeemed.
2018-05-31 12:21:15 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 56, in get
    drive = build('userinfo.profile', 'v1', http)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 269, in _retrieve_discovery_doc
    resp, content = http.request(actual_url)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1514, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1264, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1187, in _conn_request
    conn.connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1013, in connect
    self.sock = self._context.wrap_socket(sock, server_hostname=self.host)
  File "/usr/lib/python3.6/ssl.py", line 407, in wrap_socket
    _context=self, _session=session)
  File "/usr/lib/python3.6/ssl.py", line 814, in __init__
    self.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 1068, in do_handshake
    self._sslobj.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 694, in do_handshake
    match_hostname(self.getpeercert(), self.server_hostname)
  File "/usr/lib/python3.6/ssl.py", line 327, in match_hostname
    % (hostname, ', '.join(map(repr, dnsnames))))
ssl.CertificateError: hostname 'userinfo.profile.googleapis.com' doesn't match either of '*.googleapis.com', '*.clients6.google.com', '*.cloudendpointsapis.com', 'cloudendpointsapis.com', 'googleapis.com'
2018-05-31 12:23:23 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 56, in get
    drive = build('userinfo.profile', 'v1', credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 269, in _retrieve_discovery_doc
    resp, content = http.request(actual_url)
AttributeError: 'Credentials' object has no attribute 'request'
2018-05-31 12:55:11 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 56, in get
    drive = build('userinfo.profile', 'v1', credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 269, in _retrieve_discovery_doc
    resp, content = http.request(actual_url)
AttributeError: 'Credentials' object has no attribute 'request'
2018-05-31 12:56:13 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 58, in get
    drive = build('userinfo.profile', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 222, in build
    requested_url, discovery_http, cache_discovery, cache)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 269, in _retrieve_discovery_doc
    resp, content = http.request(actual_url)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1514, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1264, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1187, in _conn_request
    conn.connect()
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/httplib2/__init__.py", line 1013, in connect
    self.sock = self._context.wrap_socket(sock, server_hostname=self.host)
  File "/usr/lib/python3.6/ssl.py", line 407, in wrap_socket
    _context=self, _session=session)
  File "/usr/lib/python3.6/ssl.py", line 814, in __init__
    self.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 1068, in do_handshake
    self._sslobj.do_handshake()
  File "/usr/lib/python3.6/ssl.py", line 694, in do_handshake
    match_hostname(self.getpeercert(), self.server_hostname)
  File "/usr/lib/python3.6/ssl.py", line 327, in match_hostname
    % (hostname, ', '.join(map(repr, dnsnames))))
ssl.CertificateError: hostname 'userinfo.profile.googleapis.com' doesn't match either of '*.googleapis.com', '*.clients6.google.com', '*.cloudendpointsapis.com', 'cloudendpointsapis.com', 'googleapis.com'
2018-05-31 12:57:44 - main - ERROR - Internal server error
Traceback (most recent call last):
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/application.py", line 64, in __call__
    response_body = self.__root__(*remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 83, in __call__
    return self._serve_handler(handler, remaining_paths)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/nanohttp/controllers.py", line 78, in _serve_handler
    return handler(*remaining_paths, **kwargs)
  File "/home/mohammad/workspace/urlshortener/urlshortener/controllers/auth.py", line 58, in get
    drive = build('userinfo', 'v1', credentials=credentials)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/home/mohammad/.virtualenvs/urlshortener/lib/python3.6/site-packages/googleapiclient/discovery.py", line 233, in build
    "name: %s  version: %s" % (serviceName, version))
googleapiclient.errors.UnknownApiNameOrVersion: name: userinfo  version: v1
